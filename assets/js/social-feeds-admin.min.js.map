{"version":3,"sources":["../../node_modules/browser-pack/_prelude.js","../../src/js/social-feeds-admin.js"],"names":["showSyncNotice","syncData","msg","synced","updated","length","notice","$","first","after","window","global","$form","$startDate","find","$syncButton","Modernizr","inputtypes","date","datepicker","on","this","val","attr","removeAttr","trigger","event","formData","serializeArray","name","push","value","addClass","text","off","ajax","type","data","success","complete","jqXHR","textStatus","status","removeClass"],"mappings":"AAAA;;ACsDA,QAASA,gBAAeC,GACtB,GAAIC,GAAM,GACNC,EAASF,EAASG,QAAQC,MAE5BH,GADY,IAAXC,EACK,UAAUA,EAAO,SAEjB,UAAUA,EAAO,SAGzB,IAAIG,GAAS,iDAAiDJ,EAAI,qBAElEK,GAAE,YAAYC,QAAQC,MAAMH,GAjE9B,GAAIC,GAAuB,mBAAXG,QAAyBA,OAAe,OAAsB,mBAAXC,QAAyBA,OAAe,OAAI,IAE/GJ,GAAE,WACA,GAAIK,GAAQL,EAAE,0BACVM,EAAaD,EAAME,KAAK,6BACxBC,EAAeH,EAAME,KAAK,kCAG1BE,WAAUC,WAAWC,MACvBL,EAAWM,aAGbN,EAAWO,GAAG,SAAU,WACD,KAAlBb,EAAEc,MAAMC,MACTP,EAAYQ,KAAK,WAAY,YAE7BR,EAAYS,WAAW,cAExBC,QAAQ,UAEXV,EAAYK,GAAG,QAAS,SAASM,GAC/B,GAAIC,GAAWf,EAAMgB,iBAEjBC,EAAOd,EAAYQ,KAAK,gBAAgB,WAE5CI,GAASG,MACPD,KAAQA,EACRE,MAASlB,EAAWS,QAGtBV,EAAMoB,SAAS,wBACfjB,EAAYQ,KAAK,WAAY,YAAYU,KAAK,cAC9CpB,EAAWqB,IAAI,UAEf3B,EAAE4B,MACAC,KAAM,OACNC,KAAMV,EACNW,QAAS,SAASD,GACbA,EAAKjC,SACNJ,eAAeqC,IAGnBE,SAAU,SAASC,EAAOC,GACpBD,EAAME,QAAU,KAAOF,EAAME,OAAS,IACxC3B,EAAYkB,KAAK,iBAEjBlB,EAAYkB,KAAK,eAEnBrB,EAAM+B,YAAY","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","var $ = (typeof window !== \"undefined\" ? window['jQuery'] : typeof global !== \"undefined\" ? global['jQuery'] : null);\n\n$(function() {\n  var $form = $('#social_feeds_settings');\n  var $startDate = $form.find('input[name*=\"sync_start\"]');\n  var $syncButton =  $form.find('button[name*=\"sync_now_button\"]');\n\n\n  if(!Modernizr.inputtypes.date) {\n    $startDate.datepicker();\n  }\n\n  $startDate.on('change', function() {\n    if($(this).val() === '') {\n      $syncButton.attr('disabled', 'disabled');\n    } else {\n      $syncButton.removeAttr('disabled');\n    }\n  }).trigger('change');\n\n  $syncButton.on('click', function(event) {\n    var formData = $form.serializeArray();\n\n    var name = $syncButton.attr('data-network')+'_sync_now';\n\n    formData.push({\n      'name': name,\n      'value': $startDate.val()\n    });\n\n    $form.addClass('social-feeds-loading');\n    $syncButton.attr('disabled', 'disabled').text('Syncing...');\n    $startDate.off('change');\n\n    $.ajax({\n      type: 'POST',\n      data: formData,\n      success: function(data) {\n        if(data.updated) {\n          showSyncNotice(data);\n        }\n      },\n      complete: function(jqXHR, textStatus) {\n        if (jqXHR.status >= 200 && jqXHR.status < 400) {\n          $syncButton.text('Sync Finished');\n        } else {\n          $syncButton.text('Sync Failed');\n        }\n        $form.removeClass('social-feeds-loading');\n      }\n    });\n  });\n});\n\nfunction showSyncNotice(syncData) {\n  var msg = '';\n  var synced = syncData.updated.length;\n  if(synced === 1) {\n    msg = 'Synced '+synced+' post.';\n  } else {\n    msg = 'Synced '+synced+' posts.';\n  }\n\n  var notice = '<div class=\"notice notice-success\"><p><strong>'+msg+'</strong></p></div>';\n\n  $('.wrap h2').first().after(notice);\n}\n"]}